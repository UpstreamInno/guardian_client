{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/Users/satya/Workspace/Callstack/react-navigation-tabs/src/navigators/createBottomTabNavigator.tsx\";\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { ScreenContainer } from 'react-native-screens';\nimport createTabNavigator from \"../utils/createTabNavigator\";\nimport BottomTabBar from \"../views/BottomTabBar\";\nimport ResourceSavingScene from \"../views/ResourceSavingScene\";\n\nvar TabNavigationView = function (_React$PureComponent) {\n  _inherits(TabNavigationView, _React$PureComponent);\n\n  function TabNavigationView() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, TabNavigationView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(TabNavigationView)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loaded: [_this.props.navigation.state.index]\n    };\n\n    _this._getButtonComponent = function (_ref) {\n      var route = _ref.route;\n      var descriptors = _this.props.descriptors;\n      var descriptor = descriptors[route.key];\n      var options = descriptor.options;\n\n      if (options.tabBarButtonComponent) {\n        return options.tabBarButtonComponent;\n      }\n\n      return undefined;\n    };\n\n    _this._renderTabBar = function () {\n      var _this$props = _this.props,\n          _this$props$tabBarCom = _this$props.tabBarComponent,\n          TabBarComponent = _this$props$tabBarCom === void 0 ? BottomTabBar : _this$props$tabBarCom,\n          tabBarOptions = _this$props.tabBarOptions,\n          navigation = _this$props.navigation,\n          screenProps = _this$props.screenProps,\n          getLabelText = _this$props.getLabelText,\n          getAccessibilityLabel = _this$props.getAccessibilityLabel,\n          getAccessibilityRole = _this$props.getAccessibilityRole,\n          getAccessibilityStates = _this$props.getAccessibilityStates,\n          getTestID = _this$props.getTestID,\n          renderIcon = _this$props.renderIcon,\n          onTabPress = _this$props.onTabPress,\n          onTabLongPress = _this$props.onTabLongPress;\n      var descriptors = _this.props.descriptors;\n      var state = _this.props.navigation.state;\n      var route = state.routes[state.index];\n      var descriptor = descriptors[route.key];\n      var options = descriptor.options;\n\n      if (options.tabBarVisible === false) {\n        return null;\n      }\n\n      return React.createElement(TabBarComponent, _extends({}, tabBarOptions, {\n        jumpTo: _this._jumpTo,\n        navigation: navigation,\n        screenProps: screenProps,\n        onTabPress: onTabPress,\n        onTabLongPress: onTabLongPress,\n        getLabelText: getLabelText,\n        getButtonComponent: _this._getButtonComponent,\n        getAccessibilityLabel: getAccessibilityLabel,\n        getAccessibilityRole: getAccessibilityRole,\n        getAccessibilityStates: getAccessibilityStates,\n        getTestID: getTestID,\n        renderIcon: renderIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        }\n      }));\n    };\n\n    _this._jumpTo = function (key) {\n      var _this$props2 = _this.props,\n          navigation = _this$props2.navigation,\n          onIndexChange = _this$props2.onIndexChange;\n      var index = navigation.state.routes.findIndex(function (route) {\n        return route.key === key;\n      });\n      onIndexChange(index);\n    };\n\n    return _this;\n  }\n\n  _createClass(TabNavigationView, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          navigation = _this$props3.navigation,\n          renderScene = _this$props3.renderScene,\n          lazy = _this$props3.lazy;\n      var routes = navigation.state.routes;\n      var loaded = this.state.loaded;\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        }\n      }, React.createElement(ScreenContainer, {\n        style: styles.pages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        }\n      }, routes.map(function (route, index) {\n        if (lazy && !loaded.includes(index)) {\n          return null;\n        }\n\n        var isFocused = navigation.state.index === index;\n        return React.createElement(ResourceSavingScene, {\n          key: route.key,\n          style: StyleSheet.absoluteFill,\n          isVisible: isFocused,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          }\n        }, renderScene({\n          route: route\n        }));\n      })), this._renderTabBar());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var index = nextProps.navigation.state.index;\n      return {\n        loaded: prevState.loaded.includes(index) ? prevState.loaded : [].concat(_toConsumableArray(prevState.loaded), [index])\n      };\n    }\n  }]);\n\n  return TabNavigationView;\n}(React.PureComponent);\n\nTabNavigationView.defaultProps = {\n  lazy: true,\n  getAccessibilityRole: function getAccessibilityRole() {\n    return 'button';\n  },\n  getAccessibilityStates: function getAccessibilityStates(_ref2) {\n    var focused = _ref2.focused;\n    return focused ? ['selected'] : [];\n  }\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden'\n  },\n  pages: {\n    flex: 1\n  }\n});\nexport default createTabNavigator(TabNavigationView);","map":{"version":3,"sources":["createBottomTabNavigator.tsx"],"names":["TabNavigationView","React","PureComponent","defaultProps","lazy","getAccessibilityRole","getAccessibilityStates","focused","nextProps","prevState","index","loaded","state","_getButtonComponent","route","descriptors","descriptor","options","_renderTabBar","TabBarComponent","tabBarOptions","navigation","screenProps","getLabelText","getAccessibilityLabel","getTestID","renderIcon","onTabPress","onTabLongPress","_jumpTo","onIndexChange","renderScene","routes","styles","isFocused","StyleSheet","container","flex","overflow","pages","createTabNavigator"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  View,\n  StyleSheet,\n  AccessibilityRole,\n  AccessibilityState,\n} from 'react-native';\nimport { NavigationRoute } from 'react-navigation';\n\n// eslint-disable-next-line import/no-unresolved\nimport { ScreenContainer } from 'react-native-screens';\n\nimport createTabNavigator, {\n  NavigationViewProps,\n} from '../utils/createTabNavigator';\nimport BottomTabBar from '../views/BottomTabBar';\nimport ResourceSavingScene from '../views/ResourceSavingScene';\nimport {\n  NavigationTabProp,\n  NavigationBottomTabOptions,\n  BottomTabBarOptions,\n  SceneDescriptorMap,\n} from '../types';\n\ntype Config = {\n  lazy?: boolean;\n  tabBarComponent?: React.ComponentType<any>;\n  tabBarOptions?: BottomTabBarOptions;\n};\n\ntype Props = NavigationViewProps &\n  Config & {\n    getAccessibilityRole: (props: {\n      route: NavigationRoute;\n    }) => AccessibilityRole | undefined;\n    getAccessibilityStates: (props: {\n      route: NavigationRoute;\n      focused: boolean;\n    }) => AccessibilityState[];\n    navigation: NavigationTabProp;\n    descriptors: SceneDescriptorMap;\n    screenProps?: unknown;\n  };\n\ntype State = {\n  loaded: number[];\n};\n\nclass TabNavigationView extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    lazy: true,\n    getAccessibilityRole: (): AccessibilityRole => 'button',\n    getAccessibilityStates: ({\n      focused,\n    }: {\n      focused: boolean;\n    }): AccessibilityState[] => (focused ? ['selected'] : []),\n  };\n\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n    const { index } = nextProps.navigation.state;\n\n    return {\n      // Set the current tab to be loaded if it was not loaded before\n      loaded: prevState.loaded.includes(index)\n        ? prevState.loaded\n        : [...prevState.loaded, index],\n    };\n  }\n\n  state = {\n    loaded: [this.props.navigation.state.index],\n  };\n\n  _getButtonComponent = ({ route }: { route: NavigationRoute }) => {\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarButtonComponent) {\n      return options.tabBarButtonComponent;\n    }\n\n    return undefined;\n  };\n\n  _renderTabBar = () => {\n    const {\n      tabBarComponent: TabBarComponent = BottomTabBar,\n      tabBarOptions,\n      navigation,\n      screenProps,\n      getLabelText,\n      getAccessibilityLabel,\n      getAccessibilityRole,\n      getAccessibilityStates,\n      getTestID,\n      renderIcon,\n      onTabPress,\n      onTabLongPress,\n    } = this.props;\n\n    const { descriptors } = this.props;\n    const { state } = this.props.navigation;\n    const route = state.routes[state.index];\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarVisible === false) {\n      return null;\n    }\n\n    return (\n      <TabBarComponent\n        {...tabBarOptions}\n        jumpTo={this._jumpTo}\n        navigation={navigation}\n        screenProps={screenProps}\n        onTabPress={onTabPress}\n        onTabLongPress={onTabLongPress}\n        getLabelText={getLabelText}\n        getButtonComponent={this._getButtonComponent}\n        getAccessibilityLabel={getAccessibilityLabel}\n        getAccessibilityRole={getAccessibilityRole}\n        getAccessibilityStates={getAccessibilityStates}\n        getTestID={getTestID}\n        renderIcon={renderIcon}\n      />\n    );\n  };\n\n  _jumpTo = (key: string) => {\n    const { navigation, onIndexChange } = this.props;\n\n    const index = navigation.state.routes.findIndex(route => route.key === key);\n\n    onIndexChange(index);\n  };\n\n  render() {\n    const { navigation, renderScene, lazy } = this.props;\n    const { routes } = navigation.state;\n    const { loaded } = this.state;\n\n    return (\n      <View style={styles.container}>\n        <ScreenContainer style={styles.pages}>\n          {routes.map((route, index) => {\n            if (lazy && !loaded.includes(index)) {\n              // Don't render a screen if we've never navigated to it\n              return null;\n            }\n\n            const isFocused = navigation.state.index === index;\n\n            return (\n              <ResourceSavingScene\n                key={route.key}\n                style={StyleSheet.absoluteFill}\n                isVisible={isFocused}\n              >\n                {renderScene({ route })}\n              </ResourceSavingScene>\n            );\n          })}\n        </ScreenContainer>\n        {this._renderTabBar()}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  pages: {\n    flex: 1,\n  },\n});\n\nexport default createTabNavigator<Config, NavigationBottomTabOptions, Props>(\n  TabNavigationView\n);\n"]},"metadata":{},"sourceType":"module"}